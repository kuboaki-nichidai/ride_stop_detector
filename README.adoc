:encoding: utf-8
:lang: ja
:scripts: cjk
:media: prepress
:linkcss:
:stylesdir: css
:stylesheet: mystyle.css
:sectanchors:
:autofit-option:
:experimental:
:support-uri:
:original-support-uri:
:twoinches: width='360'
:full-width: width='100%'
:three-quarters-width: width='75%'
:two-thirds-width: width='66%'
:half-width: width='50%'
:half-size:
:one-thirds-width: width='33%'
:one-quarters-width: width='25%'
:thumbnail: width='60'
:imagesdir: images
:sourcesdir: codes
:icons: font
:hide-uri-scheme!:
:figure-caption: 図
:example-caption: リスト
:table-caption: 表
:appendix-caption: 付録
:xrefstyle: short
:section-refsig:
:chapter-refsig:


= ride_stop_detector

NOTE: この演習は、グループで相談しつつ、各自が実施します。

複数のライドストップを巡って周回を繰り返せるようにする。

== 準備

. `sample04` のコードをディレクトリごと複製して `sample04_ride_stops` を用意しなさい。
  * `sample04_ride_stops` は、`ride_stop_detector` の中に置きます。
. `sample04.asta` を複製して、`sample04_ride_stops.asta` を用意しなさい
  * `sample04_ride_stops.asta` は、`ride_stop_detector` の中に置きます。
. クラス図の名前を、 `sample04_ride_stopsのクラス図` に変更しなさい。


== やりたいこと

ライドストップが見つかったら停止、利用者を降ろし利用者が乗ったら、つぎのライドストップへ進む。
（ライドストップの識別がやりたいので、ボタン操作はしないでよい）

.複数のライドストップを巡って周回を繰り返す
image::ride_stop_detector_course.png[width=50%]


== モデル図を修正する(1)


=== sample04_ride_stopsのクラス図を修正する

. クラス図を参照して、`wall_detector` クラスを元に、ライドストップを識別するクラス `ride_stop_detector` を作成しなさい（置き換えるのもよし、 `wall_detector` の操作を呼び出して使うクラスを追加してもよい）。
. 上記のクラスに、ライドストップを識別したかどうか調べる操作 `is_detected` を用意しなさい。
. `porter` クラスを修正して、`auto_ride` クラスを作成しなさい。また、同クラスの操作も見直しなさい。
. `carrier` クラスを修正して、 `passenger_sheat` クラスを作成しなさい。また、同クラスの操作も見直しなさい。

=== sample04_ride_stopsのクラス図を保存しなさい

作成したクラス図を `sample04_ride_stops_class_01.png` として `images` ディレクトリに保存しなさい。

. 「ツール＞画像出力＞現在の図」で、保存用ダイアログを開く。
. 作成したクラス図を `sample04_ride_stops_class_01.png` として `images` ディレクトリに保存する（ダミー画像ファイルになっているので、置き換える）

.`sample04_ride_stops` のクラス図（保存できたら置き換わる）
image::sample04_ride_stops_class_01.png[{full-width}]


NOTE: 編集したら、ターミナルからgitコマンドを使ってコミットしなさい。

=== sample04_ride_stopsのステートマシン図を修正する

* `auto_ride` クラスの、人を運ぶ働きの操作のステートマシン図を、 `porter` の `transport` を参考にして作成しなさい。
* 必要なら、他のクラスのステートマシン図も作成しなさい。


=== sample04_ride_stopsのステートマシン図を保存しなさい

作成したクラス図を `sample04_ride_stops_stm_01.png` として `images` ディレクトリに保存しなさい。

. 「ツール＞画像出力＞現在の図」で、保存用ダイアログを開く。
* 作成したクラス図を `sample04_ride_stops_stm_01.png` として `images` ディレクトリに保存しなさい。

.`sample04_ride_stop` のステートマシン図（保存できたら置き換わる）
image::sample04_ride_stops_stm_01.png[{full-width}]

NOTE: 編集したら、ターミナルからgitコマンドを使ってコミットしなさい。

=== sample04_ride_stopsを動かしてみなさい

.`sample04_ride_stop` を実行する
. 人を乗せると、走行する。
. ライドストップを見つけら、停止する。
. 人を降ろし、再び乗せると、走行する。
. つぎのライドストップへ進み、乗り降りを繰り返す。


== 対策を検討する

=== sample04_ride_stopsの課題を挙げなさい

どんな課題が見つかったか、このファイル（ `README.adoc` ）を編集して下記に箇条書きしなさい。

[example]
----
* ここに課題を書く。
* ここに課題を書く。
* ここに課題を書く。
* ここに課題を書く。
----

=== sample04_ride_stopsを対策を検討しなさい

どんな対策をとればよさそうか、このファイル（ `README.adoc` ）を編集して下記に箇条書きしなさい。

[example]
----
* ここに課題を書く。
* ここに課題を書く。
* ここに課題を書く。
* ここに課題を書く。
----


== ステートマシン図を修正する
